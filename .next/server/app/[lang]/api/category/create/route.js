"use strict";(()=>{var e={};e.id=1525,e.ids=[1525],e.modules={53524:e=>{e.exports=require("@prisma/client")},67096:e=>{e.exports=require("bcrypt")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},40711:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>w,requestAsyncStorage:()=>m,routeModule:()=>y,serverHooks:()=>q,staticGenerationAsyncStorage:()=>d,staticGenerationBailout:()=>_});var a={};t.r(a),t.d(a,{POST:()=>CategoryCreate}),t(52676);var o=t(30813),s=t(19361),n=t(29474),i=t(6962),u=t(23284),p=t(53524),c=t(73292),l=t(7408),g=t(38584);let x=new p.PrismaClient;async function CategoryCreate(e){let r=await (0,n.getServerSession)(i.Y);if(!r)return u.Z.json({message:"unauthenticated"},{status:401});let t=await e.formData(),a={};for(let e of g.S.Z5)a[e]=t.get(`category_name_${e}`);let o=t.get("category_icon"),s=o&&0!==o.size?Buffer.from(await o.arrayBuffer()):null,p=s?o.type:null,y=null;if(o&&s){let{filePath:e,filePathRelative:r}=await (0,l.Tr)(o.name);await (0,c.writeFile)(e,s),y=r}let m=await x.category.create({data:{name:a,slug:t.get("category_slug"),parent:Number(t.get("category_parent")),rank:Number(t.get("category_rank")),icon:y,icon_mime:p}});return u.Z.json(m,{status:200})}let y=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/[lang]/api/category/create/route",pathname:"/[lang]/api/category/create",filename:"route",bundlePath:"app/[lang]/api/category/create/route"},resolvedPagePath:"/var/www/next-creator/app/[lang]/api/category/create/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:d,serverHooks:q,headerHooks:f,staticGenerationBailout:_}=y,w="/[lang]/api/category/create/route"},38584:e=>{e.exports=JSON.parse('{"S":{"ZP":"ja","Z5":["ja","en"],"p8":{"ja":{"ja":"日本語","en":"英語"},"en":{"ja":"Japanese","en":"English"}}}}')}};var r=require("../../../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[8807,9059,7737,8813,3284,6962,7408],()=>__webpack_exec__(40711));module.exports=t})();