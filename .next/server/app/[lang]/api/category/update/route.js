"use strict";(()=>{var e={};e.id=2054,e.ids=[2054],e.modules={53524:e=>{e.exports=require("@prisma/client")},67096:e=>{e.exports=require("bcrypt")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},73292:e=>{e.exports=require("fs/promises")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},24744:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>_,originalPathname:()=>w,requestAsyncStorage:()=>y,routeModule:()=>d,serverHooks:()=>q,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var a={};r.r(a),r.d(a,{POST:()=>CategoryUpdate}),r(52676);var o=r(30813),s=r(19361),n=r(29474),i=r(6962),u=r(23284),p=r(53524),g=r(73292),c=r(7408),l=r(38584);let x=new p.PrismaClient;async function CategoryUpdate(e){let t=await (0,n.getServerSession)(i.Y);if(!t)return u.Z.json({message:"unauthenticated"},{status:401});let r=await e.formData(),a=r.get("category_id"),o={};for(let e of l.S.Z5)o[e]=r.get(`category_name_${e}`);let s=r.get("category_icon"),p=s&&0!==s.size?Buffer.from(await s.arrayBuffer()):null,d=p?s.type:null,y=null;if(s&&p){let{filePath:e,filePathRelative:t}=await (0,c.Tr)(s.name);await (0,g.writeFile)(e,p),y=t}let m=await x.category.update({where:{id:Number(a)},data:s&&p?{name:o,slug:r.get("category_slug"),parent:Number(r.get("category_parent")),rank:Number(r.get("category_rank")),icon:y,icon_mime:d}:{name:o,slug:r.get("category_slug"),parent:Number(r.get("category_parent")),rank:Number(r.get("category_rank"))}});return u.Z.json(m,{status:200})}let d=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/[lang]/api/category/update/route",pathname:"/[lang]/api/category/update",filename:"route",bundlePath:"app/[lang]/api/category/update/route"},resolvedPagePath:"/var/www/next-creator/app/[lang]/api/category/update/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:m,serverHooks:q,headerHooks:_,staticGenerationBailout:f}=d,w="/[lang]/api/category/update/route"},38584:e=>{e.exports=JSON.parse('{"S":{"ZP":"ja","Z5":["ja","en"],"p8":{"ja":{"ja":"日本語","en":"英語"},"en":{"ja":"Japanese","en":"English"}}}}')}};var t=require("../../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[8807,9059,7737,8813,3284,6962,7408],()=>__webpack_exec__(24744));module.exports=r})();