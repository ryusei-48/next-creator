"use strict";(()=>{var e={};e.id=831,e.ids=[831],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},55193:(e,a,r)=>{r.r(a),r.d(a,{headerHooks:()=>w,originalPathname:()=>P,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>x});var t={};r.r(t),r.d(t,{GET:()=>MediaStreamIcon}),r(52676);var i=r(30813),n=r(19361),o=r(23284),s=r(57147),u=r(53524);let c=process.env.APP_ROOT_PATH,d=`${c}/public`,m=new u.PrismaClient;async function MediaStreamIcon(e){let a=new Headers(e.headers),r=new URL(e.url).searchParams,t=r.get("id");if(t&&t.match(/^[0-9]+$/g)){let e=await m.category.findFirst({where:{id:Number(t)}});if(e&&e.icon&&e.icon_mime){a.set("Content-Type",e.icon_mime);let r=(0,s.createReadStream)(d+e.icon);return new Response(r,{headers:a})}}return o.Z.json({message:"メディアの取得に失敗しました。"},{status:401})}let p=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/[lang]/api/media-stream/icon/route",pathname:"/[lang]/api/media-stream/icon",filename:"route",bundlePath:"app/[lang]/api/media-stream/icon/route"},resolvedPagePath:"/var/www/next-creator/app/[lang]/api/media-stream/icon/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:_,headerHooks:w,staticGenerationBailout:x}=p,P="/[lang]/api/media-stream/icon/route"}};var a=require("../../../../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),r=a.X(0,[8807,8813,3284],()=>__webpack_exec__(55193));module.exports=r})();